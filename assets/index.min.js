var t=Object.defineProperty,e=(e,s,i)=>(((e,s,i)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i})(e,"symbol"!=typeof s?s+"":s,i),i);const s=t=>440*Math.pow(2,(t-69)/12),[i,h]=[60,67],[o,n]=[64,71],[l,r]=[62,69];let a=[i,h,r,o,i,53,o].map((t=>t-12*.7)),c=["333333","21221","1111","2221","33333"],u=[...Array(300).keys()].flatMap((t=>c[t%c.length].split("")));class d{constructor(t,s,i){e(this,"enable",!1),e(this,"cool_sfx",0),this.t=t,this.i=s,this.h=i}static init(){let t;const e=()=>{const e=new Float32Array(256);e.fill(-1,0,128),e.fill(1,128,256);let s=t.createOscillator();s.type="sawtooth";let i=t.createWaveShaper();i.curve=e;let h=t.createWaveShaper();h.curve=(t=>{let e=new Float32Array(2);return e[0]=t,e[1]=t,e})(.5);let o=t.createGain(),n=t.createGain();return s.connect(h),h.connect(o),o.connect(i),s.connect(i),i.connect(n),{gain:n,width:o.gain,o:s}};return new d((()=>{t=new AudioContext}),(()=>(()=>{if(!t)return;let i=t.currentTime,h=.06,n=.2,l=.01,r=.2,c=.2,d=.18;[h,n,l,r]=[h,n,l,r].map((t=>t/4)),r=Math.max(r,.03-(h+n+l));let f=e(),w=e();f.o.detune.setValueAtTime(.4,i),w.o.detune.setValueAtTime(1,i);let M=t.createBiquadFilter();M.type="lowpass";let p=t.createBiquadFilter();p.type="highpass";let m=t.createDynamicsCompressor();m.threshold.setValueAtTime(-30,i),m.ratio.setValueAtTime(2,i),m.attack.setValueAtTime(.5,i),m.release.setValueAtTime(.5,i);let v=t.createGain(),_=t.createGain();f.gain.connect(M),w.gain.connect(p),M.connect(v),p.connect(_);let b=t.createGain();v.connect(m),_.connect(m),m.connect(b),b.connect(t.destination);let y=t.createOscillator();y.type="sine",y.frequency.setValueAtTime(7,i);let g=t.createGain();g.gain.setValueAtTime(.8,i),y.connect(g),g.connect(f.width),g.connect(w.width);let x=e();x.o.frequency.setValueAtTime(s(o),i),x.width.setValueAtTime(.25,i);let A=t.createGain();var C;A.gain.setValueAtTime(1,i),x.o.connect(A),A.connect(b.gain),x.o.start(),y.start(),f.o.start(),w.o.start(),C=i,u.forEach(((t,e)=>{let i=C+e*(h+n+l+r+.2),o=a[e%a.length];f.o.frequency.setValueAtTime(s(o),i),w.o.frequency.setValueAtTime(s(o+3),i),f.width.setValueAtTime(.05,i),w.width.setValueAtTime(.05,i),f.width.linearRampToValueAtTime(.5,i+h),w.width.linearRampToValueAtTime(.5,i+h),f.width.linearRampToValueAtTime(.2,i+h+n+l),w.width.linearRampToValueAtTime(.2,i+h+n+l),M.Q.value=2,M.frequency.setValueAtTime(1400,i),M.frequency.linearRampToValueAtTime(500,i+h),M.frequency.linearRampToValueAtTime(2400,i+h+n),M.frequency.linearRampToValueAtTime(1e3,i+h+n+l+r),p.Q.value=1,p.frequency.setValueAtTime(100,i),p.frequency.linearRampToValueAtTime(300,i+h),p.frequency.linearRampToValueAtTime(800,i+h+n+l),p.frequency.linearRampToValueAtTime(100,i+h+n+l+r),v.gain.setValueAtTime(X,i),_.gain.setValueAtTime(X,i),"1"!==t&&"3"!==t||(v.gain.linearRampToValueAtTime(.38,i+h),v.gain.linearRampToValueAtTime(d,i+h+n),l>0&&v.gain.linearRampToValueAtTime(c,i+h+n+l),v.gain.linearRampToValueAtTime(X,i+h+n+l+r),v.gain.setValueAtTime(X,i+h+n+l+r+.2)),"2"!==t&&"3"!==t||(_.gain.linearRampToValueAtTime(.38,i+h),_.gain.exponentialRampToValueAtTime(d,i+h+n),l>0&&_.gain.exponentialRampToValueAtTime(c,i+h+n+l),_.gain.linearRampToValueAtTime(X,i+h+n+l+r),_.gain.setValueAtTime(X,i+h+n+l+r+.2))}))})()),(()=>(()=>{if(!t)return;const e=new Float32Array(256);for(let t=0;t<256;t++){let i=Math.random()*t/256+(s=Math.random()*t*256+Math.sin(t/256*Y),1/(1+Math.exp(-s)));e.fill(i,t,t+2)}var s;let i=t.createOscillator(),h=t.createWaveShaper();h.curve=e;let o=t.createGain();i.connect(h),h.connect(o),o.connect(t.destination);let n=t.currentTime,l=t.createOscillator(),r=t.createOscillator(),a=t.createGain();r.connect(a),l.connect(a),a.connect(o.gain),l.start(),r.start(),i.start(),o.gain.setValueAtTime(.5,n),a.gain.setValueAtTime(1,n),r.frequency.setValueAtTime(128,n),l.frequency.setValueAtTime(2,n),r.frequency.linearRampToValueAtTime(0,n+1.2),l.frequency.linearRampToValueAtTime(0,n+1.8),o.gain.linearRampToValueAtTime(1,n+2),o.gain.linearRampToValueAtTime(0,n+2.4),setTimeout((()=>{i.stop(),r.stop(),l.stop(),o.disconnect()}),2800)})()))}l(){this.enable&&this.i()}u(){this.enable&&0===this.M&&(this.M=8,this.h())}}const f=t=>new Proxy(t,{p:!0,get(t,e){return"if"===e?t=>{this.p=t}:"else"===e?()=>{this.p=!this.p}:"function"==typeof t[e]?(...s)=>{if(this.p)return t[e](...s)}:t[e]}});class w{constructor(){e(this,"move_p"),e(this,"down_p"),e(this,"last_up_p"),e(this,"last_down_p"),e(this,"just_down",!1)}static init(t){let e=t.getBoundingClientRect();window.addEventListener("resize",(()=>{e=t.getBoundingClientRect()}));const s=t=>t instanceof MouseEvent?[t.clientX,t.clientY]:[t.touches[0].clientX,t.touches[0].clientY],i=t=>[(t[0]-e.left)/e.width*p,(t[1]-e.top)/e.height*m];let h=new w;const o=t=>{h.m(i(s(t)))},n=t=>{h.v(i(s(t)))},l=t=>{h._(i(s(t)))};return window.addEventListener("mousedown",o),window.addEventListener("touchstart",o),window.addEventListener("mousemove",n),window.addEventListener("touchmove",n),window.addEventListener("mouseup",l),window.addEventListener("touchend",l),h}g(t,e,s){if(this.A(t,e,s))return this.C}A(t,e,s=jt){if(this.$)return It(t,e,...this.$)<=s}k(t,e,s=jt){return!!this.N&&It(t,e,...this.N)<=s}v(t){this.N=t}m(t){this.C=!0,this.$=t}_(t){this.F=t,this.I=this.$,this.$=void 0}j(){this.C=!1}}class M{constructor(t){this.cx=t}B(){}P(t){}static init(t){let e=document.createElement("canvas");e.width=p,e.height=m;let s=e.getContext("2d");return t.appendChild(e),[new M(s),e]}R(t,e,s,i,h){this.cx.save(),this.cx.translate(v,_),this.cx.translate(t,e),this.cx.rotate(s),this.cx.scale(i,h),this.cx.translate(-v,-_)}O(){this.cx.restore()}T(t){this.cx.strokeStyle=t}q(t){this.cx.fillStyle=t}D(){this.cx.font="52px Courier New"}G(){this.cx.font="72px Courier New"}H(){this.cx.font="96px Courier New"}J(){this.cx.font="148px Courier New"}K(t,e,s){this.cx.textAlign="center",this.cx.textBaseline="top",this.cx.fillText(t,e,s)}L(t,e,s){this.cx.moveTo(t-s,e),this.cx.lineTo(t+s,e)}S(t,e,s=100){this.cx.arc(t,e,s,0,Z)}U(t=8){this.cx.lineWidth=t,this.cx.beginPath()}V(){this.cx.lineWidth=4,this.cx.beginPath()}W(){this.cx.stroke()}X(t,e){this.cx.moveTo(t,e)}Y(t,e){this.cx.lineTo(t,e)}fr(t,e,s,i){this.cx.fillRect(t,e,s,i)}Z(t,e,s,i){this.cx.fillRect(t-s/2,e-i/2,s,i)}tt(t,e){this.cx.strokeRect(-t/2,-e/2,t,e)}save(){this.cx.save()}et(){this.cx.restore()}rotate(t,e=0,s=0){this.cx.translate(e,s),this.cx.rotate(t)}}const p=1920,m=1080,v=p/2,_=m/2,b=v/2,y=v/3,g=_/3,x=v/4,A=v/8,C="#1e1b22",$="#5d1320",k="#7431e3",N="#e331da",F="#e3cd31",I="#dacf80",j="#60e331",B="#319ae3",E="#d7d9db",P="#942890";function R(t,e){const s=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),h=parseInt(t.substring(5,7),16);return`rgba(${Math.min(255,Math.max(0,Math.round(s+s*e)))}, ${Math.min(255,Math.max(0,Math.round(i+i*e)))}, ${Math.min(255,Math.max(0,Math.round(h+h*e)))}, 1)`}const z=t=>R(t,.8),O=t=>R(t,-.8),T=O(C),q=O($),D=O(k),G=O(N),H=O(F),J=O(I),K=O(j),L=O(B);O(E),O(P),z(C);const Q=z($);z(k),z(N);const S=z(F),U=z(I),V=z(j),W=z(B);z(E),z(P);const X=1e-4,Y=Math.PI,Z=2*Y,tt=Y/2,et=Y/3,st=Y/8,it=Y/64;let ht=16,ot=ht;const nt=t=>t,lt=t=>Math.sin(t),rt=t=>Math.cos(t),at=t=>e=>t(e%13/13),ct=at((t=>t)),ut=at((t=>lt(t*Z))),dt=at((t=>rt(t*Z))),ft=at((t=>(t=>t<.5?0:1)(t))),wt=at((t=>(t=>t%.5)(t))),Mt=(t,e,s)=>e,pt=t=>t(19*Math.random()%13/13),mt=(t,e)=>pt((s=>3e-6*ot%s/(1.2*s)<.5?t:e)),vt=(t,e)=>pt((s=>3e-4*ot%s/(1.2*s)<.5?t:e)),_t=at((t=>.1*mt(t,2*t)+.3*ut(t)+.7*ut(t*t*Z*Z))),bt=at((t=>.1*mt(t,2*t)+.3*ut(t)+.7*ut(t*t*Z*Z))),yt=at((t=>pt((e=>Math.abs(lt(20*rt(.2*t)%13+13*lt(.002*e)%7))))));const gt=new class{constructor(t){e(this,"pp",0),e(this,"P",(t=>{let{st:e,it:s,ht:i,ot:h,nt:o,lt:n}=this.rt;return e*rt(s*t+i)+h*t+2.718281*o^n*t})),this.rt=t}}({st:X,it:Y,ht:0,ot:X,nt:3,lt:10*X});[...Array(20).keys()].map((t=>(()=>{let t=!1;return e=>(e>1-X&&(t=!0),t?1:e)})()));const xt=t=>{let e=0;return s=>(e=s?0==e?t:e:Math.max(0,e-1),e>0)},At=xt(208),Ct=xt(1),$t=xt(32.5);let kt="ntr",Nt=!1,Ft=1;function It(t,e,s,i){let h=t-s,o=e-i;return Math.sqrt(h*h+o*o)}const jt=100;class Bt{constructor(){e(this,"idps"),e(this,"ps"),e(this,"hnd"),e(this,"mdl"),e(this,"xs")}static init(){let t=new Bt;return t.ct=[],t.ut=[[0,50,130],[Y,300,300]],t.dt=[5,4,3,2,1],t.ft=[0,1,1,1,0],t.wt=[],t}}!function(t){let e,[s,i]=M.init(t),h=w.init(i),o=f(s),n=d.init(),l=Bt.init();window.requestAnimationFrame((function t(s){(function(t,e,s,i){var h,o;let n=38,l=3*n,r=8*n,a=lt(.003*ot)*it,c=lt(.02*ot)*it,u=lt(.003*ot)*tt;if(Nt){if(s){t.g(0,0,360)&&(s.enable=!s.enable),s.M=Math.max(0,s.M-ht)}}else t.$&&(s.t(),Nt=!0,s.enable=!0,Ft=-3,s.u());if(0==Ft){t.g(0,0,1920)&&(kt="play")}Ft<0&&(Ft=Math.min(0,Ft+ht/1e3));let d=gt.Mt(ot+10);gt.vt=gt.Mt(ot);let f=Math.abs(d-gt.vt)>6;d>80&&(f=!0);let w=At(f);Ct(f)&&(null==s||s.u());let M=$t(f);e.P(M),e.R(5*ut(.02*ot),3*dt(.002*ot),_t(.001*ot)*it-yt(10*a)*it,1+.2*wt(ot*ct(.18*ot)),1+.2*wt(ot*ct(.24*ot))),e.P(!0);for(let p of i.ct)p[2]+=10*ct(.002*ot)+5*_t(.002*ot);if(i.ct=i.ct.filter((t=>t[2]<m)),i.ut.length>gt.vt&&i.wt.length>0){let t=i.ut.splice(i.wt.pop(),1);i.ct.push(...t),i.ct.sort(((t,e)=>t[1]-e[1]))}i.ut.length<gt.vt&&i.ut.push([0,r+2*l+_t(ot)*v,l+2*l+100*ut(.02*ot)]);i.wt.length<gt.vt/2&&i.ut.length>0&&i.wt.push(Math.floor(_t(.2*ot)*i.ut.length));if(Math.abs(ut(.02*ot)+ut(.01*ot))<10*Math.sin(a)){let t=i.ft.findIndex((t=>ct(100*ot)<.1&&0===t));-1!==t&&(i.ft[t]=Math.floor(7*Math.abs(ut(.3*ot)))%3+2),i.ft.reverse()}if(ut(.02*ot)+ut(.01*ot)<.05){let t=i.ft.findIndex((t=>1===t)),e=i.ft.findIndex((t=>ct(7*ot)<.1&&t>1));-1!==e&&(i.ft[t]=0,i.ft[e]=1)}e.P(!0),e.q(C),e.fr(0,0,p,m);let F=t.k(0,0,360);e.q(F?Q:T),e.D(),e.P(!(null==s?void 0:s.enable)),e.K("audio off",2*l,n),e.B(),e.K("audio on",2*l,n),e.P(!0),e.T(I),e.U(),e.S(v+r-l,l,60),e.X(v+r-l,l),e.W();for(let p=0;p<10;p++){e.P(.002*ut(p*ot)<.002*p),e.save(),e.U(),e.T(S),e.rotate(.5*-tt+100*p,v+r-l,l),e.X(0,0);for(let t=0;t<13*ct(.008*ot);t++)e.Y(lt(.002*ot+t/13*Z)*lt(.002*ot+t/13*Y)*50-2*p,100*nt(t/13*Y)+20*(8-p));e.W(),e.et()}let R=40;e.T(H),e.U(4);for(let p=0;p<14;p++)e.S(500+ut(p+a*a*3e3)*R,600+dt(-p/2)*R*2,10);e.W(),e.T(L),e.U(4);for(let p=0;p<14;p++)e.S(v+dt(p)*dt(10*a)*R,_+ut(p)*a*10*R*2,10);e.W(),Nt&&0===Ft?"ntr"===kt&&(e.P(!0),e.H(),e.q(I),e.P(mt(!0,!1)),e.K("goo;d click to start",v,1.5*_),e.B(),e.K("good; click to start",v,1.5*_)):(e.J(),e.q(vt(Q,q)),e.K("lower your volume",v,_));if("ntr"==kt){let t=ct(.007*ot);e.T(C),e.U(2),e.q(T),e.Z(v,_,100+1920*t,30),e.X(v,_),e.Y(v+100,_),e.W()}if("play"===kt){e.P(!0),e.T(O("#cdcddc")),e.U(3);for(let t=1;t<13;t++)e.S(100+100*ft(t+.003*ot),0+1080*ct(t),8);e.W(),e.T(O("#cdcddc")),e.U(3);for(let t=1;t<13;t++)e.S(p-r-l+100*_t(t+.003*ot),0+1080*ct(t),8);e.W(),e.T(O("#cdcddc")),e.U(3);for(let t=1;t<13;t++)e.S(v-l+100*bt(.003*ot-t),0+1080*ct(t),8);e.W(),e.P(!0),e.T(T),e.U();for(let t=0;t<i.ct.length;t++){let[s,h,o]=i.ct[t];0==t?e.X(h,o):e.Y(h,o)}e.W(),e.P(!0);const s=Mt(Q,$);e.T(s),e.U(),e.X(n,n),e.Y(p-r,n),e.Y(p-r,_+l),e.Y(n,_+l),e.Y(n,n),e.X(n,_+l),e.Y(n,m-n),e.Y(p-r,m-n),e.Y(p-r,_+l),e.W();let[d,f]=[v-b-x,_+2*g],M=t.k(d,f,360),F=t.k(d,f,120),z=F?$:I;e.G(),e.q(I),e.T(z),e.save(),e.rotate(st+a,d,f),e.tt(300,100),F?(e.K("d",40*c-140,-30),e.K("i",40*c-50,-30),e.K("c",50+40*c,-30),e.K("e",140+40*c,-30)):M?(e.q(U),e.K("dice",0,0)):e.K("dice",0,-30),e.et(),e.q(J),e.T(mt(J,I)),e.save(),e.rotate(-st+a,v+y+A,_+2*g),e.tt(300,100),e.K("plow",0,0),e.et(),e.q(C),e.save(),e.rotate(0,v-r-l,_+n),e.fr(0,0,600,100),e.et(),e.T(K),e.save(),e.rotate(0,v-l,_+l),e.tt(513,178),e.et(),e.J();for(let t=0;t<i.dt.length;t++)e.P(1===i.ft[t]),e.U(),e.q(V),e.T(V),e.K(`${i.dt[t]}`,v-l*(3-t),_+30),e.L(v-l*(3-t),_+30+150,20),e.W(),e.P(0==i.ft[t]),e.U(),e.q(K),e.T(bt(ot)<.8?K:I),e.K(`${i.dt[t]}`,v-l*(3-t),_+30+wt(ot)*Math.abs(20*_t(u))*Math.abs(ut(u))*50),e.L(v-l*(3-t),_+30+150,20),e.W(),e.P(i.ft[t]>1),e.q($),e.T($),e.K(`${i.ft[t]}`,v-l*(3-t),_+30+wt(ot)*Math.abs(20*_t(u))*Math.abs(ut(u))*50);e.P(!0);for(let t=0;t<i.ut.length;t++){let[s,h,o]=i.ut[t],[l,r,c]=[j,k,N];i.wt.includes(t)&&(s+=ut(a+.002*ot),l=K,r=N,c=G),e.save(),e.rotate(s+Y+20*-a*.25,n+100+h,n+o),e.T(l),e.U();for(let t=0;t<10;t++){let s=t/10*Z,i=6+Math.sin(.1*s+a)*(100+a),h=0+i*Math.cos(s),o=0+i*Math.sin(s);0==t?e.X(h,o):e.Y(h,o)}e.W(),e.T(r),e.U(),e.X(0,0),e.Y(0,130),e.W(),e.T(c),e.U(),e.S(0,130,13),e.W(),e.et()}e.P(w),e.save(),e.U(),e.T(E),e.rotate(.5*-tt,n+100,n),e.X(0,0);for(let t=0;t<-Math.min(10,8*-bt(.008*ot)-Math.abs(7*ut(.003*ot)));t++)e.Y(130*wt(250*t)+10*bt(t/13*200+1e-4*ot),540*ut(.3*t));e.W(),e.et(),e.P(!0),e.q(W),e.J(),e.K("belly basket",v,0);let q=.5,H=1.2,L=1.3;e.q(B),e.H(),e.K("wind",p-l*H,l*L-l*q),e.q(D),e.fr(p-r+5,l*L-l*q-20,r-15,5),e.fr(p-r+5,l*L-l*q+l,r-15,5),e.fr(p-r+5+r-15,l*L-l*q-20,5,8*l-32),e.q(I),e.H(),e.K("sun",p-l*H,l*L*2-l*q),e.q(D),e.fr(p-r+5,l*L*2-l*q+l,r-15,5),e.q(j),e.G(),e.K("plant",p-l*H,l*L*3-l*q),e.q(D),e.fr(p-r+5,l*L*3-l*q+l,r-15,5),e.q(P),e.H(),e.K("seed",p-l*H,l*L*4-l*q),e.q(D),e.fr(p-r+5,l*L*4-l*q+l,r-15,5),e.q(k),e.K("root",p-l*H,l*L*5-l*q),e.q(D),e.fr(p-r+5,l*L*5-l*q+l,r-15,5),e.q(E),e.K("ch4",p-l*H,l*L*6-l*q),e.q(D),e.fr(p-r+5,l*L*6-l*q+l,r-15,5);let S=(null==(h=t.N)?void 0:h[0])??0,X=(null==(o=t.N)?void 0:o[1])??0;S+=ut(.017*ot+.02*S)*n,X+=dt(.014*ot+.02*X)*n,S+=ut(.1*(.008*ut(ot)+a+S%et))*l,X+=_t(.1*(2e-4*-_t(ot)+a+X%et))*l,S=Math.min(Math.max(l,S),p-r),X=Math.min(Math.max(l,X),m-r),e.save(),e.T(B),e.U(),e.rotate(a*Y,S,X);for(let t=0;t<5;t++)e.rotate(a*t*Y*2,0,0),e.X(0,0),t%2==1&&e.Y(R,R),e.X(0,0),t%3==0&&e.Y(-R,-R);e.W(),e.et()}e.P(M),e.O(),e.P(!0),t.j()})(h,o,n,l),ht=Math.min(16,s-(e??s-16)),e=s,ot+=ht,window.requestAnimationFrame(t)}))}(document.getElementById("app"));
