var t=Object.defineProperty,e=(e,s,n)=>(((e,s,n)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n})(e,"symbol"!=typeof s?s+"":s,n),n);const s=t=>440*Math.pow(2,(t-69)/12),[n,i]=[60,67],[a,l]=[64,71],[o,r]=[62,69];let c=[n,i,r,a,n,53,a].map((t=>t-12*.7)),h=["333333","21221","1111","2221","33333"],p=[...Array(300).keys()].flatMap((t=>h[t%h.length].split("")));class d{constructor(t,s,n){e(this,"enable",!1),e(this,"cool_sfx",0),this.ccx=t,this.sfx2=s,this.sfx3=n}static init(){let t;const e=()=>{const e=new Float32Array(256);e.fill(-1,0,128),e.fill(1,128,256);let s=t.createOscillator();s.type="sawtooth";let n=t.createWaveShaper();n.curve=e;let i=t.createWaveShaper();i.curve=(t=>{let e=new Float32Array(2);return e[0]=t,e[1]=t,e})(.5);let a=t.createGain(),l=t.createGain();return s.connect(i),i.connect(a),a.connect(n),s.connect(n),n.connect(l),{gain:l,width:a.gain,osc:s}};return new d((()=>{t=new AudioContext}),(()=>(()=>{if(!t)return;let n=t.currentTime,i=.06,l=.2,o=.01,r=.2,h=.2,d=.18;[i,l,o,r]=[i,l,o,r].map((t=>t/4)),r=Math.max(r,.03-(i+l+o));let f=e(),m=e();f.osc.detune.setValueAtTime(.4,n),m.osc.detune.setValueAtTime(1,n);let u=t.createBiquadFilter();u.type="lowpass";let x=t.createBiquadFilter();x.type="highpass";let w=t.createDynamicsCompressor();w.threshold.setValueAtTime(-30,n),w.ratio.setValueAtTime(2,n),w.attack.setValueAtTime(.5,n),w.release.setValueAtTime(.5,n);let T=t.createGain(),g=t.createGain();f.gain.connect(u),m.gain.connect(x),u.connect(T),x.connect(g);let A=t.createGain();T.connect(w),g.connect(w),w.connect(A),A.connect(t.destination);let b=t.createOscillator();b.type="sine",b.frequency.setValueAtTime(7,n);let v=t.createGain();v.gain.setValueAtTime(.8,n),b.connect(v),v.connect(f.width),v.connect(m.width);let V=e();V.osc.frequency.setValueAtTime(s(a),n),V.width.setValueAtTime(.25,n);let M=t.createGain();var _;M.gain.setValueAtTime(1,n),V.osc.connect(M),M.connect(A.gain),V.osc.start(),b.start(),f.osc.start(),m.osc.start(),_=n,p.forEach(((t,e)=>{let n=_+e*(i+l+o+r+.2),a=c[e%c.length];f.osc.frequency.setValueAtTime(s(a),n),m.osc.frequency.setValueAtTime(s(a+3),n),f.width.setValueAtTime(.05,n),m.width.setValueAtTime(.05,n),f.width.linearRampToValueAtTime(.5,n+i),m.width.linearRampToValueAtTime(.5,n+i),f.width.linearRampToValueAtTime(.2,n+i+l+o),m.width.linearRampToValueAtTime(.2,n+i+l+o),u.Q.value=2,u.frequency.setValueAtTime(1400,n),u.frequency.linearRampToValueAtTime(500,n+i),u.frequency.linearRampToValueAtTime(2400,n+i+l),u.frequency.linearRampToValueAtTime(1e3,n+i+l+o+r),x.Q.value=1,x.frequency.setValueAtTime(100,n),x.frequency.linearRampToValueAtTime(300,n+i),x.frequency.linearRampToValueAtTime(800,n+i+l+o),x.frequency.linearRampToValueAtTime(100,n+i+l+o+r),T.gain.setValueAtTime(K,n),g.gain.setValueAtTime(K,n),"1"!==t&&"3"!==t||(T.gain.linearRampToValueAtTime(.38,n+i),T.gain.linearRampToValueAtTime(d,n+i+l),o>0&&T.gain.linearRampToValueAtTime(h,n+i+l+o),T.gain.linearRampToValueAtTime(K,n+i+l+o+r),T.gain.setValueAtTime(K,n+i+l+o+r+.2)),"2"!==t&&"3"!==t||(g.gain.linearRampToValueAtTime(.38,n+i),g.gain.exponentialRampToValueAtTime(d,n+i+l),o>0&&g.gain.exponentialRampToValueAtTime(h,n+i+l+o),g.gain.linearRampToValueAtTime(K,n+i+l+o+r),g.gain.setValueAtTime(K,n+i+l+o+r+.2))}))})()),(()=>(()=>{if(!t)return;const e=new Float32Array(256);for(let t=0;t<256;t++){let n=Math.random()*t/256+(s=Math.random()*t*256+Math.sin(t/256*U),1/(1+Math.exp(-s)));e.fill(n,t,t+2)}var s;let n=t.createOscillator(),i=t.createWaveShaper();i.curve=e;let a=t.createGain();n.connect(i),i.connect(a),a.connect(t.destination);let l=t.currentTime,o=t.createOscillator(),r=t.createOscillator(),c=t.createGain();r.connect(c),o.connect(c),c.connect(a.gain),console.log("on"),o.start(),r.start(),n.start(),a.gain.setValueAtTime(.5,l),c.gain.setValueAtTime(1,l),r.frequency.setValueAtTime(128,l),o.frequency.setValueAtTime(2,l),r.frequency.linearRampToValueAtTime(0,l+1.2),o.frequency.linearRampToValueAtTime(0,l+1.8),a.gain.linearRampToValueAtTime(1,l+2),a.gain.linearRampToValueAtTime(0,l+2.4),setTimeout((()=>{console.log("off"),n.stop(),r.stop(),o.stop(),a.disconnect()}),2800)})()))}psfx2(){this.enable&&this.sfx2()}psfx3(){this.enable&&0===this.cool_sfx&&(this.cool_sfx=8,this.sfx3())}}const f=t=>new Proxy(t,{drawEnabled:!0,get(t,e){return"if"===e?t=>{this.drawEnabled=t}:"else"===e?()=>{this.drawEnabled=!this.drawEnabled}:"function"==typeof t[e]?(...s)=>{if(this.drawEnabled)return t[e](...s)}:t[e]}});class m{constructor(){e(this,"move_p"),e(this,"down_p"),e(this,"last_up_p"),e(this,"last_down_p"),e(this,"just_down",!1)}static init(t){let e=t.getBoundingClientRect();window.addEventListener("resize",(()=>{e=t.getBoundingClientRect()}));const s=t=>t instanceof MouseEvent?[t.clientX,t.clientY]:[t.touches[0].clientX,t.touches[0].clientY],n=t=>[(t[0]-e.left)/e.width*x,(t[1]-e.top)/e.height*w];let i=new m;const a=t=>{i.on_down(n(s(t)))},l=t=>{i.on_move(n(s(t)))},o=t=>{i.on_up(n(s(t)))};return window.addEventListener("mousedown",a),window.addEventListener("touchstart",a),window.addEventListener("mousemove",l),window.addEventListener("touchmove",l),window.addEventListener("mouseup",o),window.addEventListener("touchend",o),i}downp(t,e,s){if(this.down_on(t,e,s))return this.just_down}down_on(t,e,s=Ct){if(this.down_p)return kt(t,e,...this.down_p)<=s}hovering(t,e,s=Ct){return!!this.move_p&&kt(t,e,...this.move_p)<=s}on_move(t){this.move_p=t}on_down(t){this.just_down=!0,this.down_p=t}on_up(t){this.last_up_p=t,this.last_down_p=this.down_p,this.down_p=void 0}clear_frame(){this.just_down=!1}}class u{constructor(t){this.cx=t}else(){}if(t){}static init(t){let e=document.createElement("canvas");e.width=x,e.height=w;let s=e.getContext("2d");return t.appendChild(e),[new u(s),e]}shk_bg(t,e,s,n,i){this.cx.save(),this.cx.translate(T,g),this.cx.translate(t,e),this.cx.rotate(s),this.cx.scale(n,i),this.cx.translate(-T,-g)}shk_fi(){this.cx.restore()}sc(t){this.cx.strokeStyle=t}fc(t){this.cx.fillStyle=t}sml3(){this.cx.font="52px Courier New"}sml2(){this.cx.font="72px Courier New"}sml(){this.cx.font="96px Courier New"}lrg(){this.cx.font="148px Courier New"}str(t,e,s){this.cx.textAlign="center",this.cx.textBaseline="top",this.cx.fillText(t,e,s)}clin(t,e,s){this.cx.moveTo(t-s,e),this.cx.lineTo(t+s,e)}dot(t,e,s=100){this.cx.arc(t,e,s,0,Z)}bp(t=8){this.cx.lineWidth=t,this.cx.beginPath()}sbp(){this.cx.lineWidth=4,this.cx.beginPath()}ep(){this.cx.stroke()}m2(t,e){this.cx.moveTo(t,e)}l2(t,e){this.cx.lineTo(t,e)}fr(t,e,s,n){this.cx.fillRect(t,e,s,n)}fr_c(t,e,s,n){this.cx.fillRect(t-s/2,e-n/2,s,n)}sr(t,e){this.cx.strokeRect(-t/2,-e/2,t,e)}save(){this.cx.save()}rsto(){this.cx.restore()}rotate(t,e=0,s=0){this.cx.translate(e,s),this.cx.rotate(t)}}const x=1920,w=1080,T=x/2,g=w/2,A=T/2,b=T/3,v=g/3,V=T/4,M=T/8,_="#1e1b22",y="#5d1320",R="#7431e3",q="#e331da",E="#e3cd31",k="#dacf80",C="#60e331",G="#319ae3",B="#d7d9db",I="#942890";function P(t,e){const s=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return`rgba(${Math.min(255,Math.max(0,Math.round(s+s*e)))}, ${Math.min(255,Math.max(0,Math.round(n+n*e)))}, ${Math.min(255,Math.max(0,Math.round(i+i*e)))}, 1)`}const F=t=>P(t,.8),L=t=>P(t,-.8),O=L(_),$=L(y),j=L(R),S=L(q),W=L(E),N=L(k),Q=L(C),X=L(G);L(B),L(I),F(_);const Y=F(y);F(R),F(q);const z=F(E),D=F(k),H=F(C),J=F(G);F(B),F(I);const K=1e-4,U=Math.PI,Z=2*U,tt=U/2,et=U/3,st=U/8,nt=U/64;let it=16,at=it;const lt=t=>t,ot=t=>Math.sin(t),rt=t=>Math.cos(t),ct=t=>e=>t(e%13/13),ht=ct((t=>t)),pt=ct((t=>ot(t*Z))),dt=ct((t=>rt(t*Z))),ft=ct((t=>(t=>t<.5?0:1)(t))),mt=ct((t=>(t=>t%.5)(t))),ut=(t,e,s)=>e,xt=t=>t(19*Math.random()%13/13),wt=(t,e)=>xt((s=>3e-6*at%s/(1.2*s)<.5?t:e)),Tt=(t,e)=>xt((s=>3e-4*at%s/(1.2*s)<.5?t:e)),gt=ct((t=>.1*wt(t,2*t)+.3*pt(t)+.7*pt(t*t*Z*Z))),At=ct((t=>.1*wt(t,2*t)+.3*pt(t)+.7*pt(t*t*Z*Z))),bt=ct((t=>xt((e=>Math.abs(ot(20*rt(.2*t)%13+13*ot(.002*e)%7))))));const vt=new class{constructor(t){e(this,"pp",0),e(this,"P",(t=>{let{A:e,"ω":s,"φ":n,B:i,C:a,R:l}=this.cfg;return e*rt(s*t+n)+i*t+2.718281*a^l*t})),this.cfg=t}}({A:K,"ω":U,"φ":0,B:K,C:3,R:10*K});[...Array(20).keys()].map((t=>(()=>{let t=!1;return e=>(e>1-K&&(t=!0),t?1:e)})()));const Vt=t=>{let e=0;return s=>(e=s?0==e?t:e:Math.max(0,e-1),e>0)},Mt=Vt(208),_t=Vt(1),yt=Vt(32.5);let Rt="ntr",qt=!1,Et=1;function kt(t,e,s,n){let i=t-s,a=e-n;return Math.sqrt(i*i+a*a)}const Ct=100;class Gt{constructor(){e(this,"idps"),e(this,"ps"),e(this,"hnd"),e(this,"mdl"),e(this,"xs")}static init(){let t=new Gt;return t.xs=[],t.ps=[[0,50,130],[U,300,300]],t.hnd=[5,4,3,2,1],t.mdl=[0,1,1,1,0],t.idps=[],t}}!function(t){let e,[s,n]=u.init(t),i=m.init(n),a=f(s),l=d.init(),o=Gt.init();window.requestAnimationFrame((function t(s){(function(t,e,s,n){var i,a;let l=38,o=3*l,r=8*l,c=ot(.003*at)*nt,h=ot(.02*at)*nt,p=ot(.003*at)*tt;if(qt){if(s){t.downp(0,0,360)&&(s.enable=!s.enable),s.cool_sfx=Math.max(0,s.cool_sfx-it/1e3)}}else t.down_p&&(s.ccx(),qt=!0,s.enable=!0,Et=-3,s.psfx3());if(0==Et){t.downp(0,0,1920)&&(Rt="play")}Et<0&&(Et=Math.min(0,Et+it/1e3));let d=!1,f=!1,m=!1;if("play"===Rt){let t=vt.P(at+30);vt.pp=vt.P(at);let e=Math.abs(t-vt.pp)>6;t>80&&(e=!0),f=Mt(e),m=_t(e),console.log(t,vt.pp),m&&(null==s||s.psfx3());for(let s of n.xs)s[2]+=10*ht(.002*at)+5*gt(.002*at);if(n.xs=n.xs.filter((t=>t[2]<w)),n.ps.length>vt.pp&&n.idps.length>0){let t=n.ps.splice(n.idps.pop(),1);n.xs.push(...t),n.xs.sort(((t,e)=>t[1]-e[1]))}if(n.ps.length<vt.pp&&n.ps.push([0,r+2*o+gt(at)*T,o+2*o+100*pt(.02*at)]),n.idps.length<vt.pp/2&&n.ps.length>0&&n.idps.push(Math.floor(gt(.2*at)*n.ps.length)),Math.abs(pt(.02*at)+pt(.01*at))<10*Math.sin(c)){let t=n.mdl.findIndex((t=>ht(100*at)<.1&&0===t));-1!==t&&(n.mdl[t]=Math.floor(7*Math.abs(pt(.3*at)))%3+2),n.mdl.reverse()}if(pt(.02*at)+pt(.01*at)<.05){let t=n.mdl.findIndex((t=>1===t)),e=n.mdl.findIndex((t=>ht(7*at)<.1&&t>1));-1!==e&&(n.mdl[t]=0,n.mdl[e]=1)}}let u=yt(d);e.if(u),e.shk_bg(5*pt(.02*at),3*dt(.002*at),gt(.001*at)*nt-bt(10*c)*nt,1+.2*mt(at*ht(.18*at)),1+.2*mt(at*ht(.24*at))),e.if(!0),e.if(!0),e.fc(_),e.fr(0,0,x,w);let E=t.hovering(0,0,360);e.fc(E?Y:O),e.sml3(),e.if(!(null==s?void 0:s.enable)),e.str("audio off",2*o,l),e.else(),e.str("audio on",2*o,l),e.if(!0),e.sc(k),e.bp(),e.dot(T+r-o,o,60),e.m2(T+r-o,o),e.ep();for(let x=0;x<10;x++){e.if(.002*pt(x*at)<.002*x),e.save(),e.bp(),e.sc(z),e.rotate(.5*-tt+100*x,T+r-o,o),e.m2(0,0);for(let t=0;t<13*ht(.008*at);t++)e.l2(ot(.002*at+t/13*Z)*ot(.002*at+t/13*U)*50-2*x,100*lt(t/13*U)+20*(8-x));e.ep(),e.rsto()}let P=40;e.sc(W),e.bp(4);for(let x=0;x<14;x++)e.dot(500+pt(x+c*c*3e3)*P,600+dt(-x/2)*P*2,10);e.ep(),e.sc(X),e.bp(4);for(let x=0;x<14;x++)e.dot(T+dt(x)*dt(10*c)*P,g+pt(x)*c*10*P*2,10);e.ep(),qt&&0===Et?"ntr"===Rt&&(e.if(!0),e.sml(),e.fc(k),e.if(wt(!0,!1)),e.str("goo;d click to start",T,1.5*g),e.else(),e.str("good; click to start",T,1.5*g)):(e.lrg(),e.fc(Tt(Y,$)),e.str("lower your volume",T,g));if("ntr"==Rt){let t=ht(.007*at);e.sc(_),e.bp(2),e.fc(O),e.fr_c(T,g,100+1920*t,30),e.m2(T,g),e.l2(T+100,g),e.ep()}if("play"===Rt){e.if(!0),e.sc(L("#cdcddc")),e.bp(3);for(let t=1;t<13;t++)e.dot(100+100*ft(t+.003*at),0+1080*ht(t),8);e.ep(),e.sc(L("#cdcddc")),e.bp(3);for(let t=1;t<13;t++)e.dot(x-r-o+100*gt(t+.003*at),0+1080*ht(t),8);e.ep(),e.sc(L("#cdcddc")),e.bp(3);for(let t=1;t<13;t++)e.dot(T-o+100*At(.003*at-t),0+1080*ht(t),8);e.ep(),e.if(!0),e.sc(O),e.bp();for(let t=0;t<n.xs.length;t++){let[s,i,a]=n.xs[t];0==t?e.m2(i,a):e.l2(i,a)}e.ep(),e.if(!0);const s=ut(Y,y);e.sc(s),e.bp(),e.m2(l,l),e.l2(x-r,l),e.l2(x-r,g+o),e.l2(l,g+o),e.l2(l,l),e.m2(l,g+o),e.l2(l,w-l),e.l2(x-r,w-l),e.l2(x-r,g+o),e.ep();let[d,m]=[T-A-V,g+2*v],u=t.hovering(d,m,360),E=t.hovering(d,m,120),F=E?y:k;e.sml2(),e.fc(k),e.sc(F),e.save(),e.rotate(st+c,d,m),e.sr(300,100),E?(e.str("d",40*h-140,-30),e.str("i",40*h-50,-30),e.str("c",50+40*h,-30),e.str("e",140+40*h,-30)):u?(e.fc(D),e.str("dice",0,0)):e.str("dice",0,-30),e.rsto(),e.fc(N),e.sc(wt(N,k)),e.save(),e.rotate(-st+c,T+b+M,g+2*v),e.sr(300,100),e.str("plow",0,0),e.rsto(),e.fc(_),e.save(),e.rotate(0,T-r-o,g+l),e.fr(0,0,600,100),e.rsto(),e.sc(Q),e.save(),e.rotate(0,T-o,g+o),e.sr(513,178),e.rsto(),e.lrg();for(let t=0;t<n.hnd.length;t++)e.if(1===n.mdl[t]),e.bp(),e.fc(H),e.sc(H),e.str(`${n.hnd[t]}`,T-o*(3-t),g+30),e.clin(T-o*(3-t),g+30+150,20),e.ep(),e.if(0==n.mdl[t]),e.bp(),e.fc(Q),e.sc(At(at)<.8?Q:k),e.str(`${n.hnd[t]}`,T-o*(3-t),g+30+mt(at)*Math.abs(20*gt(p))*Math.abs(pt(p))*50),e.clin(T-o*(3-t),g+30+150,20),e.ep(),e.if(n.mdl[t]>1),e.fc(y),e.sc(y),e.str(`${n.mdl[t]}`,T-o*(3-t),g+30+mt(at)*Math.abs(20*gt(p))*Math.abs(pt(p))*50);e.if(!0);for(let t=0;t<n.ps.length;t++){let[s,i,a]=n.ps[t],[o,r,h]=[C,R,q];n.idps.includes(t)&&(s+=pt(c+.002*at),o=Q,r=q,h=S),e.save(),e.rotate(s+U+20*-c*.25,l+100+i,l+a),e.sc(o),e.bp();for(let t=0;t<10;t++){let s=t/10*Z,n=6+Math.sin(.1*s+c)*(100+c),i=0+n*Math.cos(s),a=0+n*Math.sin(s);0==t?e.m2(i,a):e.l2(i,a)}e.ep(),e.sc(r),e.bp(),e.m2(0,0),e.l2(0,130),e.ep(),e.sc(h),e.bp(),e.dot(0,130,13),e.ep(),e.rsto()}e.if(f),e.save(),e.bp(),e.sc(B),e.rotate(.5*-tt,l+100,l),e.m2(0,0);for(let t=0;t<-Math.min(10,8*-At(.008*at)-Math.abs(7*pt(.003*at)));t++)e.l2(130*mt(250*t)+10*At(t/13*200+1e-4*at),540*pt(.3*t));e.ep(),e.rsto(),e.if(!0),e.fc(J),e.lrg(),e.str("belly basket",T,0);let $=.5,W=1.2,X=1.3;e.fc(G),e.sml(),e.str("wind",x-o*W,o*X-o*$),e.fc(j),e.fr(x-r+5,o*X-o*$-20,r-15,5),e.fr(x-r+5,o*X-o*$+o,r-15,5),e.fr(x-r+5+r-15,o*X-o*$-20,5,8*o-32),e.fc(k),e.sml(),e.str("sun",x-o*W,o*X*2-o*$),e.fc(j),e.fr(x-r+5,o*X*2-o*$+o,r-15,5),e.fc(C),e.sml2(),e.str("plant",x-o*W,o*X*3-o*$),e.fc(j),e.fr(x-r+5,o*X*3-o*$+o,r-15,5),e.fc(I),e.sml(),e.str("seed",x-o*W,o*X*4-o*$),e.fc(j),e.fr(x-r+5,o*X*4-o*$+o,r-15,5),e.fc(R),e.str("root",x-o*W,o*X*5-o*$),e.fc(j),e.fr(x-r+5,o*X*5-o*$+o,r-15,5),e.fc(B),e.str("ch4",x-o*W,o*X*6-o*$),e.fc(j),e.fr(x-r+5,o*X*6-o*$+o,r-15,5);let z=(null==(i=t.move_p)?void 0:i[0])??0,K=(null==(a=t.move_p)?void 0:a[1])??0;z+=pt(.017*at+.02*z)*l,K+=dt(.014*at+.02*K)*l,z+=pt(.1*(.008*pt(at)+c+z%et))*o,K+=gt(.1*(2e-4*-gt(at)+c+K%et))*o,z=Math.min(Math.max(o,z),x-r),K=Math.min(Math.max(o,K),w-r),e.save(),e.sc(G),e.bp(),e.rotate(c*U,z,K);for(let t=0;t<5;t++)e.rotate(c*t*U*2,0,0),e.m2(0,0),t%2==1&&e.l2(P,P),e.m2(0,0),t%3==0&&e.l2(-P,-P);e.ep(),e.rsto()}e.if(u),e.shk_fi(),e.if(!0),t.clear_frame()})(i,a,l,o),it=Math.min(16,s-(e??s-16)),e=s,at+=it,window.requestAnimationFrame(t)}))}(document.getElementById("app"));
